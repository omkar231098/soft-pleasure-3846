<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign In and Sign Up form</title>
    <link rel="stylesheet" href="login.css" />
    <script
      src="https://kit.fontawesome.com/c8626bb222.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body background="loginpage.jpg">
    <div class="container">
      <div class="form-box">
        <h1 id="title">Sign Up</h1>
        <form>
          <div class="input-group">
            <div class="input-field" id="nameField">
              <i class="fa-solid fa-user"></i>
              <input type="text" placeholder="Name" />
            </div>
            <div class="input-field">
              <i class="fa-solid fa-envelope"></i>
              <input type="email" placeholder="Email" id="email"/>
            </div>
            <div class="input-field">
              <i class="fa-solid fa-lock"></i>
              <input type="password" placeholder="Password" id="password" />
            </div>
            <p>Forget Password <a href="#">Click Here</a></p>
          </div>
          <div class="btn-field">
            <button type="button" id="signupBtn">Sign Up</button>
            <button type="button" id="signinBtn" class="disable">
              Sign In
            </button>
          </div>
        </form>
      </div>
    </div>
    
  </body>
  <script>
    let signupBtn = document.getElementById("signupBtn");
    let signinBtn = document.getElementById("signinBtn");
    let nameField = document.getElementById("nameField");
    let title = document.getElementById("title");
    let formEl = document.querySelector("form");
    let email = document.querySelector("#email");
    let password = document.querySelector("#password");

    signinBtn.onclick = function () {
      nameField.style.maxHeight = "0";
      title.innerHTML = "Sign In";
      signupBtn.classList.add("disable");
      signinBtn.classList.remove("disable");
    };

    signupBtn.onclick = function () {
      nameField.style.maxHeight = "60px";
      title.innerHTML = "Sign Up";
      signupBtn.classList.remove("disable");
      signinBtn.classList.add("disable");
    };



    // signup code------------------------------->
   signupBtn.addEventListener("click", function (e) {

 console.log("Hello")
     
  
      e.preventDefault();
  
    let UserName=  nameField.value;
     let Email = email.value;
     let Password = password.value;
  
      registerUser(UserName,  Email, Password);
    
  });


  function registerUser(UserName,  Email, Password) {
    
  fetch("https://real-pink-bass-hose.cyclic.app/user/register", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      name: UserName,
      email: Email,
      password: Password,
    }),
  })
    .then((response) => response.json())
    .then((data) =>{
    console.log(data)
    alert(data.Message)
    })
    .catch((error) => console.error(error));
}

// --------------------------------------------------------------------------------------------



// signin code


signinBtn.addEventListener("click", function (e) {
  
      // alert("Login User Successfully");
  
      e.preventDefault();
  
      let UserName =email.value;
     
      let Password = password.value;
  
      registerUser1(UserName, Password);
   
  });
  
  function registerUser1(UserName, Password) {
    fetch("https://real-pink-bass-hose.cyclic.app/user/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
       email: UserName,
        password: Password
      }),
    })
      .then((response) => response.json())
      .then((data) =>{console.log(data)
        alert(data.msg)
     localStorage.setItem("token",data.token)
     window.self("index.html");
     
      } )
      .catch((error) => console.error(error));
  }




    
  </script>
</html>